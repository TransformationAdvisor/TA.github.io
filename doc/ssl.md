---
layout: page
title: Configure migrated applications to use custom certificates
---

For Liberty applications deployed through TA, when Ingress is enabled, Ingress generates a self-signed certificate and key pair that is used to access the application externally via https.

It is possible to configure Ingress to use your own CA certificate and key pair using these steps:

(1) Use the kubectl CLI to create a secret containing the TLS certificate and key pair. 
    The certificate and key pair files are referenced directly without encoding them in base64 first.
    
    kubectl create secret tls ta-tls-ca-key-pair --key ./ta.key --cert ./ta.crt

 (2) In the migration bundle generated by TA, update the host and secretName attributes 
     for the Ingress feature in the values.yaml file:
     
{% highlight ruby %}    
ingress:
 enabled: true
  rewriteTarget: "/"
  path: "/modresortswar/"
  host: "tademo.rtp.raleigh.ibm.com"
  secretName: "ta-tls-ca-key-pair"
{% endhighlight %} 


**secretName** is the name of the secret created in Step 1. **host** is the fully-qualified domain name that resolves to the IP address of your clusterâ€™s proxy node. The value for host must also match the **commonName** specified in the certificate and key pair.

(3) Deploy the application using the updated migration bundle files

### Alternative Approach

It is also possible to use the IBM Cloud Private cert-manager to issue and manage certificates. Detailed steps is described in this document:
https://www.ibm.com/support/knowledgecenter/en/SSBS6K_3.1.0/manage_applications/create_cert.html#adding_ingress

After a certificate is generated, as described in Step 2, this certificate can now be used by Liberty deployments in TA. Update values.yaml as described in Step 2 above to use this certificate.
